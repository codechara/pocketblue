name: images
on:
  workflow_dispatch:
    inputs:
      device:
        type: choice
        description: 'device name'
        required: true
        options:
          - mipad5
          - mipad6
          - oneplus6
      fedora_branch:
        type: choice
        description: 'fedora branch'
        required: true
        options:
          - '42'
          - '43'
          - 'rawhide'
        default: '42'

run-name: 'images: ${{ inputs.device }} / fedora ${{ inputs.fedora_branch }}'

jobs:
  images:
    name: 'images: ${{ inputs.device }}'
    strategy:
      fail-fast: false
      matrix:
        desktop: [ gnome-desktop, gnome-mobile, phosh, plasma-desktop, plasma-mobile ]
    uses: ./.github/workflows/helper-build-image.yml
    with:
      device: ${{ inputs.device }}
      image_name: ${{ inputs.device }}-${{ matrix.desktop }}
      image_tag: ${{ inputs.fedora_branch }}
