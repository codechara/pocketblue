ARG from
FROM $from

COPY etc/ /etc/
COPY usr/ /usr/

# workaround (see https://github.com/ublue-os/bluefin-lts/issues/3)
RUN mkdir -p /var/roothome

RUN dnf -y install 'dnf5-command(copr)' && \
    dnf -y install \
        @core \
        @hardware-support \
        @standard \
        @base-graphical \
        --exclude dracut-config-rescue && \
    dnf -y install \
        NetworkManager-tui \
        fedora-release-ostree-desktop \
        fedora-release-mobility \
        systemd-oomd-defaults \
        systemd-resolved \
        grub2-efi-aa64-modules \
        grub2-efi-aa64 \
        glibc-langpack-en \
        udisks2-btrfs \
        btrfs-progs \
        tqftpserv \
        pd-mapper \
        grubby \
        rmtfs \
        qrtr \
        git \
        vim && \
    systemctl enable tqftpserv.service && \
    systemctl enable rmtfs.service && \
    dnf clean all && \
    bootc container lint
