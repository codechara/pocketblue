### Install Fedora Atomic on mipad6

- **your current os, all your files, all your custom partitions will be deleted**
- you should have `adb` and `fastboot` installed on your computer
- download image from [releases](https://github.com/pocketblue/pocketblue/releases/latest)
- unarchive it
- boot into fastboot and connect the device to your computer via usb
- make sure bootloader is unlocked
- run `flash_mipad6.sh` script
- if installation is stuck on the 'Rebooting' for more than 5 minutes, reboot the device manually by holding power+volume down
- enjoy fedora

### Usage

- default username: `user`
- default password: `123456`
- [how to upgrade system and install packages](installing-packages.md)

### Rebasing to other desktops

- rebasing is a best way to try a new desktop
- before rebasing you should run `rpm-ostree reset`
- `sudo bootc switch quay.io/pocketblue/mipad6-gnome-desktop:42` - recommended image for mipad6
- `sudo bootc switch quay.io/pocketblue/mipad6-gnome-mobile:42`
- `sudo bootc switch quay.io/pocketblue/mipad6-plasma-desktop:42`
- `sudo bootc switch quay.io/pocketblue/mipad6-plasma-mobile:42`
- `sudo bootc switch quay.io/pocketblue/mipad6-phosh:42`

### Known bugs

- sound is cracking sometimes, it can be fixed after rebooting device, or by using headphones
- fell free to open issue and report any other bugs you find

### Uninstall fedora and get stock rom back

- download `HyperOS 2.0.8.0.UMZMIXM` archive [from here](https://miuirom.org/tablets/xiaomi-pad-6)
- unarchive it
- run `bash flash_all.sh`
- reboot and enjoy stock rom
- no need for repartitioning or any other actions

### Files used by the installation script, license info, source links

- `root.raw` - root partition for fedora, built by `.github/workflows/images.yml`
- `boot.raw` - /boot partition, built by `.github/workflows/images.yml`
- `efi.raw` - /boot/efi partition, built by `.github/workflows/images.yml`
- `kxboot.img` - kexec-based bootloader, gpl3 license, [source](https://github.com/timoxa0/kxboot-pipa)
- `vbmeta-disabled.img` - generated by `avbtool make_vbmeta_image --flags 2 --padding_size 4096 --output vbmeta_disabled.img` command

### Enabled copr repositories

- [onesaladleaf/pocketblue](https://copr.fedorainfracloud.org/coprs/onesaladleaf/pocketblue) - [source](https://github.com/pocketblue/packages)
- [tx0su/pipa-support](https://copr.fedorainfracloud.org/coprs/tx0su/pipa-support) - [source](https://github.com/timoxa0/pipa-fedora-support)
- [@mobility/gnome-mobile](https://copr.fedorainfracloud.org/coprs/g/mobility/gnome-mobile) - only enabled in `quay.io/pocketblue/mipad6-gnome-mobile` image
